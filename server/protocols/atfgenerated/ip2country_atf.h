/**
 * ip2country_atf.h
 *
 * This file was auto-generated from ip2country_atf.txt by ATF protocol generator. 
 * Do not edit this file directly!
 *
 * Generator used the following keys: ip2country_atf.txt
 */

#ifndef ATF_PROTOCOL_DEFFILE_IP2COUNTRY_ATF_H
#define ATF_PROTOCOL_DEFFILE_IP2COUNTRY_ATF_H

#include "lobby.h"
#include "i18n.localedef.h"
#include "Common_atf.h"
#include "sites.h"
#include "licenseid.h"


#include "UserDefStructs.h"

namespace ip2country
{
	class ProtocolFactory
	{
	public:
		static Atf::MessageProtocol* createMessageProtocolObject(const char *_nameSpace, UINT32 _msgId);
		static bool validateProtocolMessageFromJSONString(const char *_nameSpace, UINT32 _msgId, const PString& _jsonString, const AtfMsgChecker* _checker, PString& _fieldsNotParseEnded);
		static bool validateProtocolMessage(const char *_nameSpace, UINT32 _msgId, CommMsgParser& _parser, const AtfMsgChecker* _checker, PString& _fieldsNotParseEnded);
	};


	namespace cli_unauth
	{
		struct Protocol_MSG_REDIRECTOR_URL : public Atf::MessageProtocol
		{
			//! 4 <FIXME>Common::AtfShared::LoginExtra</FIXME> s4 - siteId, <FIXME>clientExtra</FIXME> ,userId,licenseId
			UINT32 siteId;
			Common::AtfShared::LoginExtra clientExtra;
			PString userId;
			UINT32 licenseId;

			Protocol_MSG_REDIRECTOR_URL();
			void clear() override;
			bool equals(const Protocol_MSG_REDIRECTOR_URL&) const;
			bool equals(Atf::MessageProtocol* _other) const override;
			const char *asXmlString(PString& _buf, bool _logTimeStamp) const override;
			const char *asXmlString(PString& _buf, UINT64 _timestampTicks, UINT32 _msgTime) const override;
			bool loadFromXmlString(const PString& _xmlString) override;
			const char *asTraceString(PString& _buf) const override;
			void parseMsg(CommMsgParser& _parser) override;
			void composeMsg(CommMsgBody& _body, bool _ignoreJSON = COMPOSEMSG_IGNORE_JSON_DEFAULT) const override;
			UINT32 getMsgId() const override { return MSG_REDIRECTOR_URL; }
			const char *getMsgIdString() const override { return "MSG_REDIRECTOR_URL"; }
			const char *asJSONString(PString& _buf) const override;
			void loadFromJSONString(const PString& _jsonString) override;
			static void validateJSONString(const PString& _jsonString, const AtfMsgChecker* _checker, PString& _fieldsWithUnparsedContent);
			static void validateMsg(CommMsgParser& _parser, const AtfMsgChecker* _checker, PString& _fieldsWithUnparsedContent);
		};

		struct Protocol_MSG_REDIRECTOR_URL_ERROR_REPLY : public Atf::MessageProtocol
		{
			// 2 - errCode
			UINT16 errCode;

			Protocol_MSG_REDIRECTOR_URL_ERROR_REPLY();
			void clear() override;
			bool equals(const Protocol_MSG_REDIRECTOR_URL_ERROR_REPLY&) const;
			bool equals(Atf::MessageProtocol* _other) const override;
			const char *asXmlString(PString& _buf, bool _logTimeStamp) const override;
			const char *asXmlString(PString& _buf, UINT64 _timestampTicks, UINT32 _msgTime) const override;
			bool loadFromXmlString(const PString& _xmlString) override;
			const char *asTraceString(PString& _buf) const override;
			void parseMsg(CommMsgParser& _parser) override;
			void composeMsg(CommMsgBody& _body, bool _ignoreJSON = COMPOSEMSG_IGNORE_JSON_DEFAULT) const override;
			UINT32 getMsgId() const override { return MSG_REDIRECTOR_URL_ERROR_REPLY; }
			const char *getMsgIdString() const override { return "MSG_REDIRECTOR_URL_ERROR_REPLY"; }
			const char *asJSONString(PString& _buf) const override;
			void loadFromJSONString(const PString& _jsonString) override;
			static void validateJSONString(const PString& _jsonString, const AtfMsgChecker* _checker, PString& _fieldsWithUnparsedContent);
			static void validateMsg(CommMsgParser& _parser, const AtfMsgChecker* _checker, PString& _fieldsWithUnparsedContent);
		};

		struct Protocol_MSG_REDIRECTOR_URL_REPLY : public Atf::MessageProtocol
		{
			// ssssM(s) - url,country,ipAddr,region,M(redirectorTemplate)
			PString url;
			PString country;
			PString ipAddr;
			PString region;

			PString redirectorTemplate;

			Protocol_MSG_REDIRECTOR_URL_REPLY();
			void clear() override;
			bool equals(const Protocol_MSG_REDIRECTOR_URL_REPLY&) const;
			bool equals(Atf::MessageProtocol* _other) const override;
			const char *asXmlString(PString& _buf, bool _logTimeStamp) const override;
			const char *asXmlString(PString& _buf, UINT64 _timestampTicks, UINT32 _msgTime) const override;
			bool loadFromXmlString(const PString& _xmlString) override;
			const char *asTraceString(PString& _buf) const override;
			void parseMsg(CommMsgParser& _parser) override;
			void composeMsg(CommMsgBody& _body, bool _ignoreJSON = COMPOSEMSG_IGNORE_JSON_DEFAULT) const override;
			UINT32 getMsgId() const override { return MSG_REDIRECTOR_URL_REPLY; }
			const char *getMsgIdString() const override { return "MSG_REDIRECTOR_URL_REPLY"; }
			const char *asJSONString(PString& _buf) const override;
			void loadFromJSONString(const PString& _jsonString) override;
			static void validateJSONString(const PString& _jsonString, const AtfMsgChecker* _checker, PString& _fieldsWithUnparsedContent);
			static void validateMsg(CommMsgParser& _parser, const AtfMsgChecker* _checker, PString& _fieldsWithUnparsedContent);

		private: // helper functions
			void parseAnonymousMsgBody0(CommMsgParser& _parser);
			static void validateAnonymousMsgBody0(CommMsgParser& _parser, const AtfMsgChecker* _checker, const char* _descr, PString& _fieldsWithUnparsedContent);
		};

		struct NameValuePair
		{
			// M(ss) - M(name,value)
			PString name;
			PString value;

			NameValuePair();
			void clear();
			bool equals(const NameValuePair&) const;
			const char *toTraceString(PString& _str) const;
			const char *toXmlString(const char *_element, PString& _str) const;
			bool fromXmlString(const PString& _str);
			void composeMsg(CommMsgBody& _msg, bool _ignoreJSON = COMPOSEMSG_IGNORE_JSON_DEFAULT) const;
			void parseMsg(CommMsgParser& _parser);
			const char *toJSONString(PString& _str) const;
			void fromJSONString(const PString& _str);
			static void validateJSONString(const PString& _str, const AtfMsgChecker* _checker, const char* _descr, PString& _fieldsWithUnparsedContent);
			static void validateMsg(CommMsgParser& _parser, const AtfMsgChecker* _checker, const char* _descr, PString& _fieldsWithUnparsedContent);
		};

		struct Params
		{
			// M(4<M(ss)>) - M(numPairs<M(name,value)>)
			Atf::LAtfVector< NameValuePair, 4 > pairs;

			Params();
			void clear();
			bool equals(const Params&) const;
			const char *toTraceString(PString& _str) const;
			const char *toXmlString(const char *_element, PString& _str) const;
			bool fromXmlString(const PString& _str);
			void composeMsg(CommMsgBody& _msg, bool _ignoreJSON = COMPOSEMSG_IGNORE_JSON_DEFAULT) const;
			void parseMsg(CommMsgParser& _parser);
			const char *toJSONString(PString& _str) const;
			void fromJSONString(const PString& _str);
			static void validateJSONString(const PString& _str, const AtfMsgChecker* _checker, const char* _descr, PString& _fieldsWithUnparsedContent);
			static void validateMsg(CommMsgParser& _parser, const AtfMsgChecker* _checker, const char* _descr, PString& _fieldsWithUnparsedContent);
		};

		struct Protocol_MSG_RESOLVER_TAG : public Atf::MessageProtocol
		{
			//! s4s4 <FIXME>Common::AtfShared::LoginExtra</FIXME> sb4tM(4<M(ss)>)s4 - tag,siteId,country,localeId, <FIXME>clientExtra</FIXME> ,urlParamStr,isForceTest,appUserIntId,appTimeUtc,M(numPairs<M(name,value)>),state,licenseId
			PString tag;	// In DB field name is 'RESOLVERLOG.LINK'
			UINT32 siteId;
			PString country;
			UINT32 localeId;
			Common::AtfShared::LoginExtra clientExtra;
			PString urlParamStr;
			bool isForceTest;
			UINT32 appUserIntId;	// no limit
			SrvTime appTimeUtc;
			Params params;
			PString state;
			UINT32 licenseId;

			Protocol_MSG_RESOLVER_TAG();
			void clear() override;
			bool equals(const Protocol_MSG_RESOLVER_TAG&) const;
			bool equals(Atf::MessageProtocol* _other) const override;
			const char *asXmlString(PString& _buf, bool _logTimeStamp) const override;
			const char *asXmlString(PString& _buf, UINT64 _timestampTicks, UINT32 _msgTime) const override;
			bool loadFromXmlString(const PString& _xmlString) override;
			const char *asTraceString(PString& _buf) const override;
			void parseMsg(CommMsgParser& _parser) override;
			void composeMsg(CommMsgBody& _body, bool _ignoreJSON = COMPOSEMSG_IGNORE_JSON_DEFAULT) const override;
			UINT32 getMsgId() const override { return MSG_RESOLVER_TAG; }
			const char *getMsgIdString() const override { return "MSG_RESOLVER_TAG"; }
			const char *asJSONString(PString& _buf) const override;
			void loadFromJSONString(const PString& _jsonString) override;
			static void validateJSONString(const PString& _jsonString, const AtfMsgChecker* _checker, PString& _fieldsWithUnparsedContent);
			static void validateMsg(CommMsgParser& _parser, const AtfMsgChecker* _checker, PString& _fieldsWithUnparsedContent);
		};

		struct Protocol_MSG_RESOLVER_TAG_REPLY : public Atf::MessageProtocol
		{
			//! 2 <FIXME_COND_IF> s <FIXME_COND_ELSE> s <FIXME_COND_ENDIF>  - errCode <FIXME_COND_IF> ,url <FIXME_COND_ELSE> ,errDescr <FIXME_COND_ENDIF> 
			INT16 errCode;

			PString url;

			PString errDescr;

			Protocol_MSG_RESOLVER_TAG_REPLY();
			void clear() override;
			bool equals(const Protocol_MSG_RESOLVER_TAG_REPLY&) const;
			bool equals(Atf::MessageProtocol* _other) const override;
			const char *asXmlString(PString& _buf, bool _logTimeStamp) const override;
			const char *asXmlString(PString& _buf, UINT64 _timestampTicks, UINT32 _msgTime) const override;
			bool loadFromXmlString(const PString& _xmlString) override;
			const char *asTraceString(PString& _buf) const override;
			void parseMsg(CommMsgParser& _parser) override;
			void composeMsg(CommMsgBody& _body, bool _ignoreJSON = COMPOSEMSG_IGNORE_JSON_DEFAULT) const override;
			UINT32 getMsgId() const override { return MSG_RESOLVER_TAG_REPLY; }
			const char *getMsgIdString() const override { return "MSG_RESOLVER_TAG_REPLY"; }
			const char *asJSONString(PString& _buf) const override;
			void loadFromJSONString(const PString& _jsonString) override;
			static void validateJSONString(const PString& _jsonString, const AtfMsgChecker* _checker, PString& _fieldsWithUnparsedContent);
			static void validateMsg(CommMsgParser& _parser, const AtfMsgChecker* _checker, PString& _fieldsWithUnparsedContent);
		};

		struct Protocol_MSG_RESOLVER_GET_VERSION : public Atf::MessageProtocol
		{
			// Empty message body

			Protocol_MSG_RESOLVER_GET_VERSION();
			void clear() override;
			bool equals(const Protocol_MSG_RESOLVER_GET_VERSION&) const;
			bool equals(Atf::MessageProtocol* _other) const override;
			const char *asXmlString(PString& _buf, bool _logTimeStamp) const override;
			const char *asXmlString(PString& _buf, UINT64 _timestampTicks, UINT32 _msgTime) const override;
			bool loadFromXmlString(const PString& _xmlString) override;
			const char *asTraceString(PString& _buf) const override;
			void parseMsg(CommMsgParser& _parser) override;
			void composeMsg(CommMsgBody& _body, bool _ignoreJSON = COMPOSEMSG_IGNORE_JSON_DEFAULT) const override;
			UINT32 getMsgId() const override { return MSG_RESOLVER_GET_VERSION; }
			const char *getMsgIdString() const override { return "MSG_RESOLVER_GET_VERSION"; }
			const char *asJSONString(PString& _buf) const override;
			void loadFromJSONString(const PString& _jsonString) override;
			static void validateJSONString(const PString& _jsonString, const AtfMsgChecker* _checker, PString& _fieldsWithUnparsedContent);
			static void validateMsg(CommMsgParser& _parser, const AtfMsgChecker* _checker, PString& _fieldsWithUnparsedContent);
		};

		struct Protocol_MSG_RESOLVER_GET_VERSION_REPLY : public Atf::MessageProtocol
		{
			//! 2 <FIXME_COND_IF> s <FIXME_COND_ELSE> s <FIXME_COND_ENDIF>  - errCode <FIXME_COND_IF> ,version <FIXME_COND_ELSE> ,errDescr <FIXME_COND_ENDIF> 
			INT16 errCode;

			PString version;

			PString errDescr;

			Protocol_MSG_RESOLVER_GET_VERSION_REPLY();
			void clear() override;
			bool equals(const Protocol_MSG_RESOLVER_GET_VERSION_REPLY&) const;
			bool equals(Atf::MessageProtocol* _other) const override;
			const char *asXmlString(PString& _buf, bool _logTimeStamp) const override;
			const char *asXmlString(PString& _buf, UINT64 _timestampTicks, UINT32 _msgTime) const override;
			bool loadFromXmlString(const PString& _xmlString) override;
			const char *asTraceString(PString& _buf) const override;
			void parseMsg(CommMsgParser& _parser) override;
			void composeMsg(CommMsgBody& _body, bool _ignoreJSON = COMPOSEMSG_IGNORE_JSON_DEFAULT) const override;
			UINT32 getMsgId() const override { return MSG_RESOLVER_GET_VERSION_REPLY; }
			const char *getMsgIdString() const override { return "MSG_RESOLVER_GET_VERSION_REPLY"; }
			const char *asJSONString(PString& _buf) const override;
			void loadFromJSONString(const PString& _jsonString) override;
			static void validateJSONString(const PString& _jsonString, const AtfMsgChecker* _checker, PString& _fieldsWithUnparsedContent);
			static void validateMsg(CommMsgParser& _parser, const AtfMsgChecker* _checker, PString& _fieldsWithUnparsedContent);
		};
	};
};

#endif
