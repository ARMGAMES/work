/**
 * getfile_atf_thin.h
 *
 * This file was auto-generated from getfile_atf.txt by ATF protocol generator. 
 * Do not edit this file directly!
 *
 * Generator used the following keys: -genMoveConstructor -thin getfile_atf.txt
 */

#ifndef ATF_PROTOCOL_DEFFILE_GETFILE_ATF_THIN_H
#define ATF_PROTOCOL_DEFFILE_GETFILE_ATF_THIN_H

#include "pplib.h"
#include "getfileinterface.h"


#include "ThinAtfUserDefStructs.h"

namespace GetFile
{
	class ProtocolFactory
	{
	public:
		static bool validateProtocolMessage(const char *_nameSpace, UINT32 _msgId, CommMsgParser& _parser, const AtfMsgChecker* _checker, PString& _fieldsNotParseEnded);
	};


	namespace getfile_client
	{
		struct Protocol_MSG_GET_FILE_CHUNK
		{
			// 4s4s - client_reqId,filePath,offset,verInfo
			UINT32 client_reqId;	// no limit
			PString filePath;
			UINT32 offset;
			PString verInfo;

			Protocol_MSG_GET_FILE_CHUNK();
			void clear();
			bool equals(const Protocol_MSG_GET_FILE_CHUNK&) const;
			const char *asTraceString(PString& _buf) const;
			void parseMsg(CommMsgParser& _parser);
			void composeMsg(CommMsgBody& _body) const;

			static UINT32 getMsgId() { return MSG_GET_FILE_CHUNK; }
			static const char *getMsgIdString() { return "MSG_GET_FILE_CHUNK"; }
			static void validateMsg(CommMsgParser& _parser, const AtfMsgChecker* _checker, PString& _fieldsWithUnparsedContent);

#ifdef MOVE_CONSTRUCTOR_SUPPORTED
			Protocol_MSG_GET_FILE_CHUNK(Protocol_MSG_GET_FILE_CHUNK&&);
			Protocol_MSG_GET_FILE_CHUNK& operator=(Protocol_MSG_GET_FILE_CHUNK&&);
#ifdef ATF_GENERATE_DEFAULT_COPYCONSTRUCTOR
			Protocol_MSG_GET_FILE_CHUNK(const Protocol_MSG_GET_FILE_CHUNK&) = default;
			Protocol_MSG_GET_FILE_CHUNK& operator=(const Protocol_MSG_GET_FILE_CHUNK&) = default;
#endif
#endif
		};

		struct Protocol_MSG_GET_FILE_CHUNK_REPLY
		{
			// 42[s|41v] - client_reqId,error[errMsg|fileLength,isLast,chunk]
			UINT32 client_reqId;
			UINT16 error;

			PString errMsg;

			UINT32 fileLength;
			BYTE isLast;
			PBlock chunk;

			Protocol_MSG_GET_FILE_CHUNK_REPLY();
			void clear();
			bool equals(const Protocol_MSG_GET_FILE_CHUNK_REPLY&) const;
			const char *asTraceString(PString& _buf) const;
			void parseMsg(CommMsgParser& _parser);
			void composeMsg(CommMsgBody& _body) const;

			static UINT32 getMsgId() { return MSG_GET_FILE_CHUNK_REPLY; }
			static const char *getMsgIdString() { return "MSG_GET_FILE_CHUNK_REPLY"; }
			static void validateMsg(CommMsgParser& _parser, const AtfMsgChecker* _checker, PString& _fieldsWithUnparsedContent);

#ifdef MOVE_CONSTRUCTOR_SUPPORTED
			Protocol_MSG_GET_FILE_CHUNK_REPLY(Protocol_MSG_GET_FILE_CHUNK_REPLY&&);
			Protocol_MSG_GET_FILE_CHUNK_REPLY& operator=(Protocol_MSG_GET_FILE_CHUNK_REPLY&&);
#ifdef ATF_GENERATE_DEFAULT_COPYCONSTRUCTOR
			Protocol_MSG_GET_FILE_CHUNK_REPLY(const Protocol_MSG_GET_FILE_CHUNK_REPLY&) = default;
			Protocol_MSG_GET_FILE_CHUNK_REPLY& operator=(const Protocol_MSG_GET_FILE_CHUNK_REPLY&) = default;
#endif
#endif
		};
	};
};

#endif
