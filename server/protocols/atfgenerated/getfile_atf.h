/**
 * getfile_atf.h
 *
 * This file was auto-generated from getfile_atf.txt by ATF protocol generator. 
 * Do not edit this file directly!
 *
 * Generator used the following keys: getfile_atf.txt
 */

#ifndef ATF_PROTOCOL_DEFFILE_GETFILE_ATF_H
#define ATF_PROTOCOL_DEFFILE_GETFILE_ATF_H

#include "pplib.h"
#include "getfileinterface.h"


#include "UserDefStructs.h"

namespace GetFile
{
	class ProtocolFactory
	{
	public:
		static Atf::MessageProtocol* createMessageProtocolObject(const char *_nameSpace, UINT32 _msgId);
		static bool validateProtocolMessageFromJSONString(const char *_nameSpace, UINT32 _msgId, const PString& _jsonString, const AtfMsgChecker* _checker, PString& _fieldsNotParseEnded);
		static bool validateProtocolMessage(const char *_nameSpace, UINT32 _msgId, CommMsgParser& _parser, const AtfMsgChecker* _checker, PString& _fieldsNotParseEnded);
	};


	namespace getfile_client
	{
		struct Protocol_MSG_GET_FILE_CHUNK : public Atf::MessageProtocol
		{
			// 4s4s - client_reqId,filePath,offset,verInfo
			UINT32 client_reqId;	// no limit
			PString filePath;
			UINT32 offset;
			PString verInfo;

			Protocol_MSG_GET_FILE_CHUNK();
			void clear() override;
			bool equals(const Protocol_MSG_GET_FILE_CHUNK&) const;
			bool equals(Atf::MessageProtocol* _other) const override;
			const char *asXmlString(PString& _buf, bool _logTimeStamp) const override;
			const char *asXmlString(PString& _buf, UINT64 _timestampTicks, UINT32 _msgTime) const override;
			bool loadFromXmlString(const PString& _xmlString) override;
			const char *asTraceString(PString& _buf) const override;
			void parseMsg(CommMsgParser& _parser) override;
			void composeMsg(CommMsgBody& _body, bool _ignoreJSON = COMPOSEMSG_IGNORE_JSON_DEFAULT) const override;
			UINT32 getMsgId() const override { return MSG_GET_FILE_CHUNK; }
			const char *getMsgIdString() const override { return "MSG_GET_FILE_CHUNK"; }
			const char *asJSONString(PString& _buf) const override;
			void loadFromJSONString(const PString& _jsonString) override;
			static void validateJSONString(const PString& _jsonString, const AtfMsgChecker* _checker, PString& _fieldsWithUnparsedContent);
			static void validateMsg(CommMsgParser& _parser, const AtfMsgChecker* _checker, PString& _fieldsWithUnparsedContent);
		};

		struct Protocol_MSG_GET_FILE_CHUNK_REPLY : public Atf::MessageProtocol
		{
			// 42[s|41v] - client_reqId,error[errMsg|fileLength,isLast,chunk]
			UINT32 client_reqId;
			UINT16 error;

			PString errMsg;

			UINT32 fileLength;
			BYTE isLast;
			PBlock chunk;

			Protocol_MSG_GET_FILE_CHUNK_REPLY();
			void clear() override;
			bool equals(const Protocol_MSG_GET_FILE_CHUNK_REPLY&) const;
			bool equals(Atf::MessageProtocol* _other) const override;
			const char *asXmlString(PString& _buf, bool _logTimeStamp) const override;
			const char *asXmlString(PString& _buf, UINT64 _timestampTicks, UINT32 _msgTime) const override;
			bool loadFromXmlString(const PString& _xmlString) override;
			const char *asTraceString(PString& _buf) const override;
			void parseMsg(CommMsgParser& _parser) override;
			void composeMsg(CommMsgBody& _body, bool _ignoreJSON = COMPOSEMSG_IGNORE_JSON_DEFAULT) const override;
			UINT32 getMsgId() const override { return MSG_GET_FILE_CHUNK_REPLY; }
			const char *getMsgIdString() const override { return "MSG_GET_FILE_CHUNK_REPLY"; }
			const char *asJSONString(PString& _buf) const override;
			void loadFromJSONString(const PString& _jsonString) override;
			static void validateJSONString(const PString& _jsonString, const AtfMsgChecker* _checker, PString& _fieldsWithUnparsedContent);
			static void validateMsg(CommMsgParser& _parser, const AtfMsgChecker* _checker, PString& _fieldsWithUnparsedContent);
		};
	};
};

#endif
